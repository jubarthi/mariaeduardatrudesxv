<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Maria Eduarda Trudes â€” 15 anos</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      /* Cole aqui todo o conteÃºdo de style.css */
      :root {
        --primary-blue: #3955A5;
        --primary-blue-hover: #2F447E;
      }
      body, html {
        margin: 0; padding: 0; font-family: 'Open Sans', sans-serif;
      }
      .font-playfair, h1, h2 {
        font-family: 'Playfair Display', serif;
      }
      .text-primary { color: var(--primary-blue); }
      .btn-primary {
        width:100%; padding:.75rem 0; background:var(--primary-blue);
        color:white; font-weight:600; border-radius:.5rem;
        cursor:pointer; border:none; transition:.3s;
      }
      .btn-primary:hover { background: var(--primary-blue-hover); }
      .form-card {
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        background: rgba(255,255,255,0.8);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(57,85,165,0.3);
        border-radius: 1rem;
        padding:2rem;
        max-width:24rem;
        margin:2rem auto;
      }
      .cursor-trail {
        width:8px; height:8px; border-radius:50%;
        background:radial-gradient(circle,rgba(130,180,240,0.8),rgba(70,130,180,0.4));
        position:fixed; pointer-events:none; z-index:9999;
        animation: fadeTrail 0.6s forwards;
      }
      @keyframes fadeTrail {
        to { transform:scale(2); opacity:0 }
      }
      #status { min-height:1em; margin-top:.5rem; font-size:.9rem }
      #status.success { color: #16a34a }
      #status.error   { color: #dc2626 }
    </style>
  </head>
  <body class="relative bg-white">

    <h1 class="text-4xl font-playfair text-primary text-center mt-8">
      Maria Eduarda Trudes â€” 15 anos
    </h1>

    <div class="form-card">
      <h2 class="text-2xl font-playfair text-primary text-center mb-2">
        Envie suas lembranÃ§as
      </h2>
      <p class="text-center text-gray-600 mb-6">
        Obrigada por compartilhar este momento tÃ£o especial! ðŸ’™
      </p>

      <form id="upload-form" class="space-y-4">
        <div>
          <label class="block text-sm font-semibold text-gray-700">Seu nome</label>
          <input id="nome" type="text" required placeholder="Ex: Ana Silva"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue/50" />
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700">Fotos ou vÃ­deos</label>
          <input id="arquivos" type="file" multiple required accept="image/*,video/*"
            class="w-full text-sm text-gray-600" />
        </div>
        <button type="submit" class="btn-primary">Enviar lembranÃ§as</button>
        <p id="status"></p>
      </form>
    </div>

    <script>
      // Rastro de partÃ­culas
      document.addEventListener('mousemove', e => {
        const d = document.createElement('div');
        d.className = 'cursor-trail';
        const s = 8;
        d.style.left = (e.clientX - s/2) + 'px';
        d.style.top  = (e.clientY - s/2) + 'px';
        document.body.appendChild(d);
        setTimeout(() => d.remove(), 600);
      });

      // LÃ³gica de upload para o mesmo domÃ­nio
      const form = document.getElementById('upload-form');
      const status = document.getElementById('status');

      form.addEventListener('submit', async e => {
        e.preventDefault();
        status.textContent = '';
        const btn = form.querySelector('button');
        btn.disabled = true; btn.textContent = 'Enviandoâ€¦';

        const nome = document.getElementById('nome').value.trim();
        const files = Array.from(document.getElementById('arquivos').files);
        if (!nome || files.length === 0) {
          status.textContent = 'Preencha nome e escolha pelo menos um arquivo.';
          status.className = 'error';
          btn.disabled = false; btn.textContent = 'Enviar lembranÃ§as';
          return;
        }

        try {
          const fileObjs = await Promise.all(files.map(file => new Promise((res, rej) => {
            const reader = new FileReader();
            reader.onload = () => {
              res({
                name: file.name,
                mimeType: file.type,
                contentBase64: reader.result.split(',')[1]
              });
            };
            reader.onerror = rej;
            reader.readAsDataURL(file);
          })));

          const resp = await fetch('', { 
            method:'POST',
            headers:{ 'Content-Type':'application/json' },
            body: JSON.stringify({ nome, files: fileObjs })
          });

          const json = await resp.json();
          if (json.status==='OK') {
            status.textContent = 'Enviado com sucesso! ðŸ’™';
            status.className = 'success';
            form.reset();
          } else {
            throw new Error(json.message||'Erro');
          }
        } catch (err) {
          console.error(err);
          status.textContent = 'Ocorreu um erro. Tente de novo.';
          status.className = 'error';
        } finally {
          btn.disabled = false;
          btn.textContent = 'Enviar lembranÃ§as';
        }
      });
    </script>
  </body>
</html>
